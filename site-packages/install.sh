#!/bin/bash

shopt -s extglob

rm -rfv !("requirements.txt"|"install.sh"|"python3.10")
python3.10 -m pip install --no-deps -r requirements.txt -t .

rm pip/__init__.py
cp ../pip_init.py pip/__init__.py

find . -name "__pycache__" -exec rm -rf {} \;

cd ../

Extensions/Dependencies/tools/build.sh
Extensions/Dependencies/tools/copy-eggs.sh

find site-packages -name "*.so" -delete
